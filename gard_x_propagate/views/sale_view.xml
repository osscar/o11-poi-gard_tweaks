<?xml version="1.0" encoding="utf-8"?>
<odoo>
  <!-- Search Views -->

  <!-- Form Views -->
  <record model="ir.ui.view" id="view_order_form">
    <field name="name">sale.order.form.inherit.gard_x_propagate</field>
    <field name="model">sale.order</field>
    <field name="mode">extension</field>
    <field name="priority">20</field>
    <field name="inherit_id" ref="sale.view_order_form" />
    <field name="arch" type="xml">

      <!-- main -->
      <xpath expr="//sheet/group[1]//field[@name='pricelist_id']" position="attributes">
        <attribute name="invisible">1</attribute>
      </xpath>

      <!-- notebook -->
      <xpath expr="//field[@name='order_line']" position="before">
        <div class="oe_button_box oe_left" name="button_box">
          <button name="%(action_view_product_propagate)d" type="action"
            attrs="{'invisible':['|',('state', '!=', 'draft')]}"
            icon="fa-cubes" string="Select Products" />
          <button name="button_order_line_unlink" type="object"
            attrs="{'invisible':['|',('state', '!=', 'draft'),('order_line', '=', [])]}"
            icon="fa-times" string="Clear Lines" confirm="This will clear all order lines. Are you sure you want to continue?" />
        </div>
      </xpath>

      <!-- order line -->
      <xpath expr="//field[@name='order_line']/tree//field[@name='route_id']" position="after">
        <button name="button_propagate_route" type="object"
          attrs="{'invisible':['|', ('route_id', '=', False), ('state', '!=', 'draft')]}"
          icon="fa-2x fa-truck" string="Propagate Route"
          confirm="This will propagate the route to all order lines. Are you sure you want to continue?" />
      </xpath>
      <xpath expr="//field[@name='order_line']/tree//field[@name='pricelist_id']" position="after">
        <button name="button_propagate_pricelist" type="object"
          attrs="{'invisible':['|', ('pricelist_id', '=', False), ('state', '!=', 'draft')]}"
          icon="fa-2x fa-list-ul" string="Propagate Pricelist"
          confirm="This will propagate the pricelist to all order lines. Are you sure you want to continue?" />
      </xpath>

    </field>
  </record>

  <!-- Actions -->

  <!-- Menus -->

</odoo>